# A Note On Data Address Types

A **_Data Address_** is a location reference used by EDC runtimes. This note outlines the different data address types and their use. 

## Control Plane

There are three types of data addresses in the control plane: Destination Data Addresses (DDA); Asset Data Addresses (ADA); and Content Data Addresses (CDA). 

#### Destination Data Address (DDA)

A consumer EDC creates a **_Destination Data Address_** for provider push transfers. The DDA is generated by the consumer and sent to the provider via a data transfer request. The provider uses the DDA to push data to the consumer.

#### Asset Data Address (ADA)

An **_Asset Data Address_** is associated with an asset on the provider and used by the latter to locate asset data. 

#### Content Data Address (CDA)

A **Content Data Address_** is used to resolve asset data. An CDA may be used by the provider to resolve data that is in turn pushed to the consumer as specified by a DDA. Alternatively, in pull transfer scenarios, an CDA may be sent to the consumer, which uses it to access the data.

#### ADAs and SDAs in the Control Plane

In some cases, an ADA may be used as an CDA; in other cases, there is no direct mapping. Consider two scenarios.

##### Scenario 1: Client API Access

A consumer requests API access modeled as an asset from a provider. The provider resolves the ADA and passes it back to the consumer to pull the data (access the API). In this case, the ADA and CDA are the same.

##### Scenario 2: Data Provisioned from a Backend System

A consumer requests a big data set that must be prepared by a backend system. The provider resolves the ADA during the provision phase. Based on the ADA, a provisioner is engaged and communicates with the backend system to generate the big data. The backend system places the generated data in object storage. When the data is available, the backend system (asynchronously) calls back into the EDC, sending an CDA that resolves to the object storage. At that point, the data transfer proceeds, and the CDA can either be used by the provider to push the data to the client (via the DDA), or the CDA sent to the client to pull the data.

#### DDA, ADA, and CDA Propagation in the Control Plane

##### Destination Data Addresses (DDA)

For push scenarios, a Destination Data Address (DDA) is sent by the consumer to the provider as the `dataDestination` contained in the `DataRequest`. The `DataRequest` is associated with the provider `TransferProcess` and propagated through the runtime. The DDA can either be provided to the consumer EDC out-of-band (as part of the client operation that initiates a transfer request, e.g. when a destination is managed by an external system), or created by a `Provisioner` and associated with a transfer process.a

For pull scenarios, there is no Destination Data Address sent by the consumer.

##### Asset Data Addresses (ADA)

An Asset Data Address is loaded along with an `Asset` via the _Data Management API_. The `DataAddressResolver` is used to resolve the ADA when a provider processes a transfer request. The ADA always exists (e.g., for both pull and push scenarios).

##### Content Data Address (CDA)

A Content Data Address (CDA) is created from an ADA. In pull scenarios, the CDA is sent to the consumer. in push scenarios, the provider uses the CDA to resolve asset content and send it to the consumer.

An CDA can be created from an ADA by copying it and sending the latter to the consumer. The CDA can also be a derivative of the ADA. For example, the the CDA could reference data that was processed by a backend system provisioner. In this case, the backend provisioner would use the ADA to obtain the "raw" asset content, process it, and return a provision result containing an CDA pointing to the processed output.


## Data Plane

There are two types of data addresses in the data plane: Source Data Addresses and Destination Data Addresses. A source data address is where data originates; a destination data address is where data is transferred to. **Note that the source and destination addresses do not necessarily correspond to the consumer and provider respectively in a data transfer.** The following section enumerates the different cases.

#### Push HTTP with Consumer and Provider DPFs

A consumer requests data that is pushed by the provider over HTTP.

###### Provider Data Plane (Originator)

| Control Plane | DPF                 |
|:--------------|:--------------------|
| CDA           | Source Address      |
| DDA           | Destination Address |

###### Consumer Data Plane

| Control Plane  | DPF                |
|:---------------|:-------------------|
| DDA            | Source Address     |
| Consumer Sink  | Destination Address|


#### Pull HTTP with Consumer and Provider DPFs

A consumer requests data that it pulls from the provider over HTTP.


###### Consumer Data Plane (Originator)

| Control Plane  | DPF                |
|:---------------|:-------------------|
| CDA            | Source Address     |
| Consumer Sink  | Destination Address|


###### Provider Data Plane

| Control Plane  | DPF                 |
|:---------------|:--------------------|
| CDA            | Source Address      |
| Provider Sink  | Destination Address |


#### Push Object Storage

A consumer requests data that is pushed by the provider to the consumer's object storage.

###### Provider Data Plane (Originator) 

| Control Plane  | DPF                 |
|:---------------|:--------------------|
| CDA            | Source Address      |
| DDA            | Destination Address |

###### Consumer Data Plane

No consumer DPF is engaged.

#### Pull Object Storage

A consumer requests data that it pull from the provider's object storage.

###### Consumer Data Plane (Originator)

| Control Plane  | DPF                 |
|:---------------|:--------------------|
| CDA            | Source Address      |
| Consumer Sink  | Destination Address |

###### Provider Data Plane

No provider DPF is engaged.
